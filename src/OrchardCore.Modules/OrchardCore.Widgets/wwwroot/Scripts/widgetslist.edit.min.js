function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_unsupportedIterableToArray(t)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(t,e):void 0}}function _iterableToArray(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}$((function(){$(document).on("click",".add-list-widget",(function(t){var e=$(this).data("widget-type"),n=$(this).data("target-id"),a=$(this).data("html-field-prefix"),r=$("#"+n).data("buildeditorurl"),i=$(this).data("prefixes-name"),o=$(this).data("parent-content-type"),s=$(this).data("part-name"),d=$(this).data("zones-name"),l=$(this).data("zone"),c=$("#"+n).closest("form").find("input[name*='Prefixes']").filter((function(t,e){return $(e).val().substring(0,$(e).val().lastIndexOf("-"))===a})).map((function(t,e){return parseInt($(e).val().substring($(e).val().lastIndexOf("-")+1))||0})),u=c.length?Math.max.apply(Math,_toConsumableArray(c))+1:0,p=a+"-"+u.toString(),m=$(this).data("contenttypes-name"),f=$(this).data("contentitems-name");$.ajax({url:r+"?id="+e+"&prefix="+p+"&prefixesName="+i+"&contentTypesName="+m+"&contentItemsName="+f+"&zonesName="+d+"&zone="+l+"&targetId="+n+"&parentContentType="+o+"&partName="+s}).done((function(t){var e=JSON.parse(t);$(document.getElementById(n)).append(e.Content),$(e.Scripts).filter("script").each((function(){$.globalEval(this.text||this.textContent||this.innerHTML||"")})),document.dispatchEvent(new CustomEvent("init-editors",{detail:{targetId:n,source:"add-widget"}}))}))})),$(document).on("click",".insert-list-widget",(function(t){var e=$(this).data("widget-type"),n=$(this).closest(".widget-template"),a=$(this).data("target-id"),r=$(this).data("html-field-prefix"),i=$("#"+a).data("buildeditorurl"),o=$(this).data("prefixes-name"),s=$(this).data("parent-content-type"),d=$(this).data("part-name"),l=$(this).data("zones-name"),c=$(this).data("zone"),u=$("#"+a).closest("form").find("input[name*='Prefixes']").filter((function(t,e){return $(e).val().substring(0,$(e).val().lastIndexOf("-"))===r})).map((function(t,e){return parseInt($(e).val().substring($(e).val().lastIndexOf("-")+1))||0})),p=u.length?Math.max.apply(Math,_toConsumableArray(u))+1:0,m=r+"-"+p.toString(),f=$(this).data("contenttypes-name"),h=$(this).data("contentitems-name");$.ajax({url:i+"?id="+e+"&prefix="+m+"&prefixesName="+o+"&contentTypesName="+f+"&contentItemsName="+h+"&zonesName="+l+"&zone="+c+"&targetId="+a+"&parentContentType="+s+"&partName="+d}).done((function(t){var e=JSON.parse(t);$(e.Content).insertBefore(n),$(e.Scripts).filter("script").each((function(){$.globalEval(this.text||this.textContent||this.innerHTML||"")})),document.dispatchEvent(new CustomEvent("init-editors",{detail:{targetId:a,source:"add-widget"}}))}))})),$(document).on("click",".widget-list-delete",(function(){var t=$(this);confirmDialog(_objectSpread({},t.data(),{callback:function(e){e&&(t.closest(".widget-template").remove(),$(document).trigger("contentpreview:render"))}}))})),$(document).on("change",".widget-editor-footer label",(function(){$(document).trigger("contentpreview:render")})),$(document).on("click",".widget-list-editor-btn-toggle",(function(){$(this).closest(".widget-editor").toggleClass("collapsed")}))}));
