$((function(){$(document).on("click",".add-list-widget",(function(t){var e=$(this).data("widget-type"),n=$(this).data("target-id"),a=$(this).data("html-field-prefix"),i=$("#"+n).data("buildeditorurl"),d=$(this).data("prefixes-name"),o=$(this).data("parent-content-type"),r=$(this).data("part-name"),s=$(this).data("zones-name"),c=$(this).data("zone"),l=a+"-"+c+"-"+$("#"+n+" .widget-editor-body").length.toString(),p=$(this).data("contenttypes-name");$.ajax({url:i+"?id="+e+"&prefix="+l+"&prefixesName="+d+"&contentTypesName="+p+"&zonesName="+s+"&zone="+c+"&targetId="+n+"&parentContentType="+o+"&partName="+r}).done((function(t){var e=JSON.parse(t);$(document.getElementById(n)).append(e.Content),$(e.Scripts).filter("script").each((function(){$.globalEval(this.text||this.textContent||this.innerHTML||"")})),document.dispatchEvent(new CustomEvent("widget-added",{detail:{targetId:n}}))}))})),$(document).on("click",".insert-list-widget",(function(t){var e=$(this).data("widget-type"),n=$(this).closest(".widget-template"),a=$(this).data("target-id"),i=$(this).data("html-field-prefix"),d=$("#"+a).data("buildeditorurl"),o=$(this).data("prefixes-name"),r=$(this).data("parent-content-type"),s=$(this).data("part-name"),c=$(this).data("zones-name"),l=$(this).data("zone"),p=i+"-"+l+"-"+$("#"+a+" .widget-editor-body").length.toString(),g=$(this).data("contenttypes-name");$.ajax({url:d+"?id="+e+"&prefix="+p+"&prefixesName="+o+"&contentTypesName="+g+"&zonesName="+c+"&zone="+l+"&targetId="+a+"&parentContentType="+r+"&partName="+s}).done((function(t){var e=JSON.parse(t);$(e.Content).insertBefore(n),$(e.Scripts).filter("script").each((function(){$.globalEval(this.text||this.textContent||this.innerHTML||"")})),document.dispatchEvent(new CustomEvent("widget-added",{detail:{targetId:a}}))}))})),$(document).on("click",".widget-list-delete",(function(){var t=$(this);confirmDialog(_objectSpread({},t.data(),{callback:function(e){e&&(t.closest(".widget-template").remove(),$(document).trigger("contentpreview:render"))}}))})),$(document).on("change",".widget-editor-footer label",(function(){$(document).trigger("contentpreview:render")})),$(document).on("click",".widget-list-editor-btn-toggle",(function(){$(this).closest(".widget-editor").toggleClass("collapsed")}))}));
